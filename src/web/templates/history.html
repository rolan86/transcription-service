{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="history-page">
    <div class="history-header">
        <h2>Transcription History</h2>
        <div class="history-stats" id="history-stats">
            <span class="stat-item" id="stat-total">0 transcriptions</span>
            <span class="stat-item" id="stat-words">0 words</span>
        </div>
    </div>

    <div class="history-controls">
        <div class="search-box">
            <input type="text" id="search-input" placeholder="Search transcriptions..." autocomplete="off">
            <button class="search-btn" id="search-btn">Search</button>
        </div>
        <button class="clear-btn" id="clear-history-btn">Clear All</button>
    </div>

    <div class="history-list" id="history-list">
        <div class="loading" id="loading">Loading history...</div>
    </div>

    <div class="pagination" id="pagination" hidden>
        <button class="page-btn" id="prev-page" disabled>&laquo; Previous</button>
        <span class="page-info" id="page-info">Page 1</span>
        <button class="page-btn" id="next-page">Next &raquo;</button>
    </div>

    <!-- Entry Detail Modal -->
    <div class="modal-overlay" id="entry-modal" hidden>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 class="modal-title" id="entry-title">Transcription Details</h3>
                <button class="modal-close" id="entry-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="entry-meta" id="entry-meta"></div>
                <div class="entry-transcript" id="entry-transcript"></div>
            </div>
            <div class="modal-actions">
                <button class="action-btn secondary" id="entry-delete-btn">Delete</button>
                <button class="action-btn" id="entry-copy-btn">Copy Text</button>
            </div>
        </div>
    </div>

    <!-- Confirm Clear Modal -->
    <div class="modal-overlay" id="confirm-modal" hidden>
        <div class="modal-content">
            <h3 class="modal-title">Clear History</h3>
            <div class="modal-body">
                <p>Are you sure you want to delete all transcription history? This action cannot be undone.</p>
            </div>
            <div class="modal-actions">
                <button class="action-btn secondary" id="confirm-cancel">Cancel</button>
                <button class="action-btn danger" id="confirm-clear">Clear All</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/history.js"></script>
{% endblock %}
